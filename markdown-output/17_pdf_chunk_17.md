# PDF Chunk 17

E S T A L T E R N A T I N G S E Q U E N C E This is a resetting window problem because if we ! nd two consecutive days that are both good or both bad, the whole window becomes invalid and we need to reset it (starting from the second of the two consecutive elements of the same type). We can grow the window when (a) it is empty or (b) the next element does not break the "chain" of alternating days ((sales[r - 1] < 10) != (sales[r] < 10)). MAXIMUM WINDOWS We are going to tackle general maximization problems (maximum length, maximum sum, etc.) with what we call maximum windows. Maximum windows grow when they can and shrink when they must. They are similar to resetting windows, but when we encounter an element that makes the window invalid, we don't discard the whole window and reset it. Instead, we shrink it element by element (by increasing l) until it becomes valid again. 7 In both cases, we need to increment r. You can see in our implementation that we could factor out that increment outside of the if/else cases and save a line of code. However, as we mentioned on page 297, when trying to come up with a valid solution, it is easier to think about each case independently ! rst—shared code between the cases can make it harder to reason about the correctness of your code. If you have time, once you are sure your code is correct, you can do a 'clean-up' pass to tidy up the code. CHAPTER 38 ▸ SLIDING WINDOWS 519 Recall the third opening bookstore problem: PROBLEM 38.8 MAXIMUM WITH AT MOST 3 BAD DAYS Given an array sales, ! nd the most consecutive days with at most 3 bad days (fewer than 10 sales). ▶Example: sales = [0, 14, 7, 9, 0, 20, 10, 0, 10] Output: 6. There are two 6-day periods with at most 3 bad days, [14, 7, 9, 0, 20, 10] and [9, 0, 20, 10, 0, 10]. SOLUTION 38.8 MAXIMUM WITH AT MOST 3 BAD DAYS We can follow this strategy for when to grow and shrink the window: 1. If the next day is good or the window contains fewer than 3 bad days, grow the window. 2. Otherwise, shrink it. Here is a full solution: 1 def max_at_most_3_bad_days(sales): 2 l, r = 0, 0 3 window_bad_days = 0 4 cur_max = 0 5 while r < len(sales): 6 can_grow = sales[r] >= 10 or window_bad_days < 3 7 if can_grow: 8 if sales[r] < 10: 9 window_bad_days += 1 10 r += 1 11 cur_max = max(cur_max, r - l) 12 else: 13 if sales[l] < 10: 14 window_bad_days -= 1 15 l += 1 16 return cur_max Figure 4. Sliding window for max_at_most_3_bad_days(). 520 BEYOND CRACKING THE CODING INTERVIEW ▸ CATALOG OF TECHNICAL TOPICS View online materials for Beyond Cracking the Coding Interview at bctci.co Many elements of the solution should look similar to the resetting window recipe, like the can_grow variable. The only new part is what happens when we cannot grow the window. We remove onlythe ! rst element in the window (sales[l]). Here is a recipe for maximum windows. Note how, before shrinking the window, we need to check the case where the window is empty (l == r)—an empty window cannot be shrunk! For many problems, an empty window is always valid, so we can omit this check (for example, in this problem, an empty window is always valid because it has 0 bad days). RECIPE 3. MAXIMUM WINDOW RECIPE. maximum_window(arr): initialize: - l and r to 0 (empty window) - data structures to track window info - cur_best to 0 while we can grow the window (r < len(arr)) if the window would still be valid with one more element grow the window (update data structures and increase r) update cur_best if needed else if the window is empty advance both l and r else shrink the window (update data structures and increase l) return cur_best MAXIMUM WINDOWS PROBLEM SET Try these problems with AI Interviewer: bctci.co/sliding-windows-problem-set-3 Follow the maximum window recipe to tackle the following questions. PROBLEM 38.9 A D C A M P A I G N B O O S T Imagine that our little bookstore has an array, projected_sales, with the projected number of sales per day in the future. We are trying to pick k days for an advertising campaign, which we expect to boost the sales on those speci! c days by at least 20. If we pick the days for the advertising campaign correctly, what is the maximum number of consecutive good days in a row we can get? (Recall that a good day is a day with at least 10 sales.) ▶Example: projected_sales = [5, 0, 20, 0, 5], k = 2 Output: 3. The only good day is day 2. We can boost days 0 and 1, days 1 and 3, or days 3 and 4. For instance, if we boost days 0 and 1, the projected sales become [25, 20, 20, 0, 5], with 3 consecutive good days. ▶Example: arr = [0, 10, 0, 10], k = 1 Output: 3. We can boost day 2; boosting day 0 is suboptimal. PROBLEM 38.10 A D C A M P A I G N W I T H S M A L L B O O S T S In the previous problem, what would change if the boost from the advertising campaign was only 5 books instead of 20? You cannot boost the same day more than once. What is the maximum number of consecutive good days in a row we can get? CHAPTER 38 ▸ SLIDING WINDOWS 521 ▶Example: projected_sales = [8, 4, 8], k = 3 Output: 1. We can boost all 3 days, resulting in [13, 9, 13] projected sales. The max consecutive good days is 1.